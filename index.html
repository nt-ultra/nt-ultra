<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Tab Ultra</title>
    <link rel="icon" href="./static/logo128.png">
    <link rel="stylesheet" href="index.css">
</head>
<body>
    <div id="app">

        <!-- header/label/greeting Section -->
        <div class="header">
            <h1 id="content-label">New Tab Ultra</h1>
        </div>

        <!-- Shortcuts Grid -->
        <div class="shortcuts-container">
            <div id="shortcuts-grid" class="shortcuts-grid"></div>
        </div>

        <!-- Sidebar Toggles -->
        <button id="settings-btn" class="settings-btn">
            <!--<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="3"></circle>
                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
            </svg>-->
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
                <line x1="3" y1="6" x2="21" y2="6"></line>
                <line x1="3" y1="12" x2="21" y2="12"></line>
                <line x1="3" y1="18" x2="21" y2="18"></line>
            </svg>
        </button>
        <button id="tabs-btn" class="tabs-btn" style="display: none;">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="9" y1="3" x2="9" y2="21"></line>
            </svg>
        </button>

        <!-- Settings Sidebar -->
        <div id="settings-sidebar" class="settings-sidebar">
            <div class="settings-content">
                <div class="settings-header">
                    <h2>Settings</h2>
                    <button id="close-settings" class="close-btn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>

                <!-- Wallpapers Section -->
                <div class="settings-section">
                    <h3>Wallpapers (<span id="wallpaper-count">0</span>/8)</h3>
                    <div id="wallpapers-grid" class="wallpapers-grid"></div>
                    <button id="add-wallpaper-btn" class="btn btn-primary">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                        New Wallpaper
                    </button>
                    <button id="remove-wallpaper-btn" class="btn btn-secondary" style="display: none;">
                        Remove Wallpaper
                    </button>
                </div>

                <!-- Display Section -->
                <div class="settings-section">
                    <h3>Display</h3>
                    <label class="label">Font Family</label>
                    <select id="font-family" class="input">
                        <option value="system-ui">System</option>
                        <option value="Arial">Arial</option>
                        <option value="Inter, sans-serif">Inter</option>
                        <option value="'JetBrains Mono', monospace">JetBrains Mono</option>
                        <option value="Liberation Serif">Liberation Serif</option>
                        <option value="monospace">Monospace</option>
                        <option value="serif">Serif</option>
                        <option value="'Times New Roman'">Times New Roman</option>
                    </select>
                    <label class="label">Label</label>
                    <select id="display-label" class="input">
                        <option value="on">On</option>
                        <option value="off">Off</option>
                    </select>
                    <label class="label">Shortcuts</label>
                    <select id="display-shortcuts" class="input">
                        <option value="on">On</option>
                        <option value="off">Off</option>
                    </select>
                    <label class="label">Tab Browser</label>
                    <select id="display-tab-browser" class="input">
                        <option value="disabled">Disabled</option>
                        <option value="button">Button</option>
                        <option value="autohide">Autohide</option>
                    </select>
                    <label class="label">Theme</label>
                    <select id="theme-mode" class="input">
                        <option value="default">Default</option>
                        <option value="custom">Custom</option>
                    </select>
                    
                    <div id="theme-controls" class="style-controls" style="display: none;">
                        <label class="label">Background Color</label>
                        <input type="text" id="theme-bg-color" class="input" placeholder="Leave empty to use default">

                        <label class="label">Foreground Color</label>
                        <input type="text" id="theme-fg-color" class="input" placeholder="Leave empty to use default">

                        <label class="label">Accent Color</label>
                        <input type="text" id="theme-accent-color" class="input" placeholder="Leave empty to use default">

                        <label class="label">Border Radius: <span id="theme-border-radius-value">10</span>px</label>
                        <input type="range" id="theme-border-radius" class="slider" min="0" max="30" value="10">

                        <label class="label">Animation Speed: <span id="theme-animation-speed-value">0.3</span>s</label>
                        <input type="range" id="theme-animation-speed" class="slider" min="0.1" max="1" step="0.1" value="0.3">

                        <label class="label">Wallpaper Dimness: 0.<span id="theme-wallpaper-dimness-value">0</span></label>
                        <input type="range" id="theme-wallpaper-dimness" class="slider" min="0" max="9" step="1" value="0">
                        
                        <label class="label">Additional settings</label>
                        <div class="checkbox-span">
                            <span>Enable more blur around the UI</span><input type="checkbox" id="theme-blur">
                        </div>
                        <!-- <div class="checkbox-span">
                            <span>This checkbox is purely cosmetic</span><input type="checkbox" id="na">
                        </div>
                        <div class="checkbox-span">
                            <span>This checkbox is purely cosmetic</span><input type="checkbox" id="na">
                        </div>
                        <div class="checkbox-span">
                            <span>This checkbox is purely cosmetic</span><input type="checkbox" id="na">
                        </div> -->
                    </div>
                    <div id="display-expanded-theme-settings" class="style-controls-state">
                        <button id="theme-controls-remove-btn" class="style-controls-remove-btn">Delete</button>
                        <button id="theme-controls-add-btn" class="style-controls-add-btn">Save</button>
                        <button id="theme-controls-reset-btn" class="style-controls-reset-btn">Reset</button>
                        <button id="theme-controls-import-btn" class="style-controls-toggle-btn">Import</button>
                        <button id="theme-controls-export-btn" class="style-controls-toggle-btn">Export</button>
                        <button id="theme-controls-toggle-btn" class="style-controls-toggle-btn">Expand</button>
                    </div>
                </div>

                <!-- Label Section -->
                <div class="settings-section" id="label-section">
                    <h3>Label</h3>
                    <label class="label">Position</label>
                    <select id="label-position" class="input">
                        <option value="top">Top</option>
                        <option value="bottom">Bottom</option>
                    </select>
                    <label class="label">Content</label>
                    <select id="content-type" class="input">
                        <option value="none">New Tab Ultra</option>
                        <option value="time">Digital Clock</option>
                        <option value="date">Todays Date</option>
                        <option value="greetings">Greetings</option>
                        <option value="timeOfDay">Time of Day</option>
                    </select>
                    <input type="text" id="user-name" class="input" placeholder="Your name" style="display: none;">
                    <label class="label">Style</label>
                    <select id="label-style" class="input">
                        <option value="none">None</option>
                        <option value="double-shadow">Extended Shadow</option>
                        <option value="basic-border">Basic Border</option>
                    </select>    
                    <label class="label">Scaling: <span id="label-font-size-value">48</span>px</label>
                    <input type="range" id="label-font-size" class="slider" min="24" max="96" value="48">
                </div>

                <!-- Shortcuts Section -->
                <div class="settings-section" id="shortcuts-section">
                    <h3>Shortcuts</h3>
                    
                    <label class="label">Max Shortcuts: <span id="shortcut-max-limit-value">24</span></label>
                    <input type="range" id="shortcut-max-limit" class="slider" min="8" max="84" step="4" value="24">
                    
                    <label class="label">Columns: <span id="shortcut-grid-columns-value">8</span></label>
                    <input type="range" id="shortcut-grid-columns" class="slider" min="4" max="12" value="8">

                    <label class="label">Scaling: <span id="shortcut-scaling-value">100</span>%</label>
                    <input type="range" id="shortcut-scaling" class="slider" min="50" max="150" value="100">
                    
                    <label class="label">Additional settings</label>
                    <div class="checkbox-span">
                        <span>Shortcut titles reveal on hover</span><input type="checkbox" id="shortcut-titles-hover">
                    </div>
                    <div class="checkbox-span">
                        <span>Shortcut icon scale on hover</span><input type="checkbox" id="shortcut-scale-hover">
                    </div>
                    <div class="checkbox-span">
                        <span>Shortcut menu hidden (right click)</span><input type="checkbox" id="shortcut-menus-hidden">
                    </div>
                    <div class="style-controls-state">
                        <button id="import-shortcuts-btn" class="import-shortcuts-btn">Import</button>
                        <button id="export-shortcuts-btn" class="export-shortcuts-btn">Export</button>
                    </div>
                </div>
                </div>

                <!-- Tab Browser Section -->
                <div class="settings-section" id="tab-browser-section" style="display: none;">
                    <h3>Tab Browser</h3>
                    <label class="label">There is no war in Ba Sing Se ☁️ ☁️ .:::...</label>
                </div>
            </div>
        </div>

        <!-- Tabs Sidebar -->
        <div id="tabs-sidebar" class="tabs-sidebar">
            <div class="tabs-content">
                <div class="tabs-header">
                    <h2>Open Tabs (<span id="tabs-count">0</span>)</h2>
                    <div class="tabs-header-actions">
                        <button id="refresh-tabs" class="icon-btn" title="Refresh">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="23 4 23 10 17 10"></polyline>
                                <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
                            </svg>
                        </button>
                        <button id="close-tabs-sidebar" class="close-btn">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="18" y1="6" x2="6" y2="18"></line>
                                <line x1="6" y1="6" x2="18" y2="18"></line>
                            </svg>
                        </button>
                    </div>
                </div>
                
                <div id="tabs-list" class="tabs-list"></div>
            </div>
        </div>
        <div class="tht"></div>

        <!-- context menu -->
        <div id="context-menu" class="context-menu" style="display: none;">
            <button class="context-menu-item" data-action="pin">Pin</button>
            <button class="context-menu-item" data-action="edit">Edit</button>
            <button class="context-menu-item" data-action="open">Open in New Tab</button>
            <button class="context-menu-item" data-action="copy">Copy Link</button>
            <button class="context-menu-item danger" data-action="delete">Delete</button>
        </div>

        <!-- Edit Modal -->
        <div id="edit-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3>Edit Shortcut</h3>
                <label class="label">Title</label>
                <input type="text" id="edit-title" class="input">
                <label class="label">URL</label>
                <input type="text" id="edit-url" class="input">
                <label class="label">Custom Icon URL (optional)</label>
                <input type="text" id="edit-icon" class="input">
                <div class="modal-actions">
                    <button id="save-edit" class="btn btn-primary">Save</button>
                    <button id="cancel-edit" class="btn btn-secondary">Cancel</button>
                </div>
            </div>
        </div>

        <!-- Add Theme Modal -->
        <div id="add-theme-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3>Save Theme</h3>
                <label class="label">Save your settings and configuration as a new theme</label>
                <input type="text" id="add-theme-name" class="input" placeholder="My Theme" maxlength="30">
                <p class="input-hint">Max 30 characters. Letters, numbers, spaces, hyphens, and underscores only.</p>
                <div class="modal-actions">
                    <button id="confirm-add-theme" class="btn btn-primary">Add Theme</button>
                    <button id="cancel-add-theme" class="btn btn-secondary">Cancel</button>
                </div>
            </div>
        </div>

        <!-- Export Theme Modal -->
        <div id="export-theme-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3>Export Theme</h3>
                <label class="label">Theme Name</label>
                <input type="text" id="export-theme-name" class="input" placeholder="Theme name">
                <label class="label">Author (optional)</label>
                <input type="text" id="export-theme-author" class="input" placeholder="Your name">
                <label class="label">Description (optional)</label>
                <textarea id="export-theme-description" class="input" placeholder="Describe your theme..." rows="3"></textarea>
                <div class="modal-actions">
                    <button id="confirm-export-file" class="btn btn-primary">Download File</button>
                    <button id="confirm-export-copy" class="btn btn-primary">Copy JSON</button>
                    <button id="cancel-export-theme" class="btn btn-secondary">Cancel</button>
                </div>
            </div>
        </div>

        <!-- Import Theme Modal -->
        <div id="import-theme-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3>Import Theme</h3>
                <label class="label">Choose Import Method</label>
                <div class="import-options">
                    <button id="import-from-file-btn" class="btn btn-primary">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="7 10 12 15 17 10"></polyline>
                            <line x1="12" y1="15" x2="12" y2="3"></line>
                        </svg>
                        File
                    </button>
                    <button id="import-from-text-btn" class="btn btn-primary">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="4 17 10 11 4 5"></polyline>
                            <line x1="12" y1="19" x2="20" y2="19"></line>
                        </svg>
                        Clipboard
                    </button>
                </div>
                <div id="import-text-area" style="display: none; margin-top: 16px;">
                    <label class="label">Paste Theme JSON</label>
                    <textarea id="import-theme-json" class="input" placeholder='{"name": "Theme Name", ...}' rows="6"></textarea>
                    <button id="confirm-import-text" class="btn btn-primary" style="margin-top: 8px;">Import</button>
                </div>
                <button id="cancel-import-theme" class="btn btn-secondary" style="margin-top: 16px;">Cancel</button>
            </div>
        </div>

        <!-- Wallpaper Selection Modal -->
        <div id="wallpaper-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <div id="wallpaper-step-1" class="wallpaper-step">
                    <h3>Add Wallpaper</h3>
                    <div class="wallpaper-options">
                        <button class="wallpaper-option-btn" data-type="file">
                            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="17 8 12 3 7 8"></polyline>
                                <line x1="12" y1="3" x2="12" y2="15"></line>
                            </svg>
                            <span>File</span>
                        </button>
                        <button class="wallpaper-option-btn" data-type="url">
                            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                                <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                            </svg>
                            <span>URL</span>
                        </button>
                        <button class="wallpaper-option-btn" data-type="color">
                            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <path d="M12 2v20M2 12h20"></path>
                            </svg>
                            <span>Color</span>
                        </button>
                    </div>
                    <button id="cancel-wallpaper" class="btn btn-secondary" style="margin-top: 16px;">Cancel</button>
                </div>

                <div id="wallpaper-step-url" class="wallpaper-step" style="display: none;">
                    <h3>Enter Image URL</h3>
                    <input type="text" id="wallpaper-url-input" class="input" placeholder="https://example.com/image.jpg">
                    <div class="modal-actions" style="margin-top: 16px;">
                        <button id="wallpaper-url-next" class="btn btn-primary">Next</button>
                        <button id="wallpaper-url-back" class="btn btn-secondary">Back</button>
                    </div>
                </div>

                <div id="wallpaper-step-color" class="wallpaper-step" style="display: none;">
                    <h3>Choose Color</h3>
                    <div class="color-picker-container">
                        <input type="color" id="wallpaper-color-input" class="color-input" value="#1a1a2e">
                        <div class="color-presets">
                            <button class="color-preset" data-color="#1a1a2e" style="background: #1a1a2e;"></button>
                            <button class="color-preset" data-color="#16213e" style="background: #16213e;"></button>
                            <button class="color-preset" data-color="#0f3460" style="background: #0f3460;"></button>
                            <button class="color-preset" data-color="#533483" style="background: #533483;"></button>
                            <button class="color-preset" data-color="#7c3aed" style="background: #7c3aed;"></button>
                            <button class="color-preset" data-color="#2563eb" style="background: #2563eb;"></button>
                            <button class="color-preset" data-color="#059669" style="background: #059669;"></button>
                            <button class="color-preset" data-color="#dc2626" style="background: #dc2626;"></button>
                        </div>
                    </div>
                    <div class="modal-actions" style="margin-top: 16px;">
                        <button id="wallpaper-color-next" class="btn btn-primary">Next</button>
                        <button id="wallpaper-color-back" class="btn btn-secondary">Back</button>
                    </div>
                </div>

                <div id="wallpaper-step-preview" class="wallpaper-step" style="display: none;">
                    <h3>Preview Wallpaper</h3>
                    <div id="wallpaper-preview" class="wallpaper-preview"></div>
                    <div class="modal-actions" style="margin-top: 16px;">
                        <button id="wallpaper-confirm" class="btn btn-primary">Confirm</button>
                        <button id="wallpaper-preview-back" class="btn btn-secondary">Cancel</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Reset Modal -->
        <div id="reset-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3>Resetting will..</h3>
                <p style="margin-bottom: 16px; font-size: 10px; color: color-mix(in srgb, var(--element-fg-color) 70%, transparent);">
                    choose what you want to delete or keep
                </p>
                <div class="checkbox-span">
                    <span>Delete all custom themes & settings</span><input type="checkbox" id="reset-themes" checked>
                </div>
                <div class="checkbox-span">
                    <span>Delete all wallpapers</span><input type="checkbox" id="reset-wallpapers">
                </div>
                <div class="checkbox-span">
                    <span>Delete all shortcuts (except pinned)</span><input type="checkbox" id="reset-shortcuts">
                </div>
                <div class="modal-actions">
                    <button id="confirm-reset" class="btn btn-primary" style="background: rgb(255,25,25);">Reset</button>
                    <button id="cancel-reset" class="btn btn-secondary">Cancel</button>
                </div>
            </div>
        </div>

        <!-- Import Shortcuts Modal -->
        <div id="import-shortcuts-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3>Import Shortcuts</h3>
                <label class="label">Choose Import Method</label>
                <div class="checkbox-span">
                    <span>Delete existing shortcuts before importing?</span><input type="checkbox" id="import-delete-check">
                </div>
                <div class="import-options">
                    <button id="import-shortcuts-file-btn" class="btn btn-primary">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="7 10 12 15 17 10"></polyline>
                            <line x1="12" y1="15" x2="12" y2="3"></line>
                        </svg>
                        File
                    </button>
                    <button id="import-shortcuts-clipboard-btn" class="btn btn-primary">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="4 17 10 11 4 5"></polyline>
                            <line x1="12" y1="19" x2="20" y2="19"></line>
                        </svg>
                        Clipboard
                    </button>
                    <button id="import-shortcuts-firefox-btn" class="btn btn-primary">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <path d="M12 6v6l4 2"></path>
                        </svg>
                        Firefox
                    </button>
                    <button id="export-shortcuts-file-btn" class="btn btn-primary" style="display: none;">File</button>
                    <button id="export-shortcuts-clipboard-btn" class="btn btn-primary" style="display: none;">Clipboard</button>
                </div>
                <div id="import-shortcuts-text-area" style="display: none; margin-top: 16px;">
                    <label class="label" id="import-shortcuts-label">Paste shortcuts</label>
                    <textarea id="import-shortcuts-input" class="input" rows="8"></textarea>
                    <button id="confirm-import-shortcuts-text" class="btn btn-primary" style="margin-top: 8px;">Import</button>
                </div>
                <button id="cancel-import-shortcuts" class="btn btn-secondary" style="margin-top: 16px;">Cancel</button>
            </div>
        </div>
        
        <input type="file" id="wallpaper-file-input" accept="image/*" style="display: none;">
        <input type="file" id="import-theme-file-input" accept=".json,application/json" style="display: none;">
        <input type="file" id="import-shortcuts-file-input" accept=".txt,text/plain" style="display: none;">
    </div>

    <script src="./js/utils/url-helpers.js"></script>
    <script src="./js/shortcuts-dragdrop.js"></script>
    <script src="./js/tabs-sidebar.js"></script>
    <script src="./js/core/sync.js"></script>
    <script src="index.js"></script>
    <!-- eventually we'll export functions instead of using globals -->
    
</body>
</html>